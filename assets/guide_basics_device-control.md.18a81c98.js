import{_ as s,o as a,c as n,a as l}from"./app.bac17831.js";const C=JSON.parse('{"title":"\u8BBE\u5907\u7BA1\u7406","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. \u767B\u5F55\u548C\u9000\u51FA\u767B\u5F55","slug":"_1-\u767B\u5F55\u548C\u9000\u51FA\u767B\u5F55"},{"level":3,"title":"1.1 \u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u6240\u6709\u8BBE\u5907","slug":"_1-1-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u6240\u6709\u8BBE\u5907"},{"level":3,"title":"1.2 \u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B\u7684\u8BBE\u5907\uFF08\u6240\u6709\u76F8\u540C\u7C7B\u578B\uFF09","slug":"_1-2-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B\u7684\u8BBE\u5907\uFF08\u6240\u6709\u76F8\u540C\u7C7B\u578B\uFF09"},{"level":3,"title":"1.3 \u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B&\u4EFB\u610F\u8BBE\u5907Id\u7684\u8BBE\u5907\uFF08\u67D0\u4E00\u4E2A\uFF09","slug":"_1-3-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B-\u4EFB\u610F\u8BBE\u5907id\u7684\u8BBE\u5907\uFF08\u67D0\u4E00\u4E2A\uFF09"},{"level":2,"title":"2. \u767B\u5F55\u8BBE\u5907\u67E5\u8BE2","slug":"_2-\u767B\u5F55\u8BBE\u5907\u67E5\u8BE2"},{"level":3,"title":"2.1 \u83B7\u5F97\u4FE1\u606F","slug":"_2-1-\u83B7\u5F97\u6240\u6709\u7528\u6237\u6240\u6709\u8BBE\u5907\u4FE1\u606F"},{"level":3,"title":"2.2 \u83B7\u5F97\u7684\u8BBE\u5907","slug":"_2-2-\u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u7684\u8BBE\u5907"},{"level":3,"title":"2.3 \u83B7\u5F97\u7684\u8BBE\u5907","slug":"_2-3-\u83B7\u5F97\u4EFB\u610F\u7528\u6237\u7684\u8BBE\u5907"},{"level":2,"title":"3. \u767B\u5F55\u8BBE\u5907\u6570\u91CF\u7BA1\u7406\uFF08\u5168\u5C40\u3001\u4EFB\u610F\u7528\u6237\uFF09","slug":"_3-\u767B\u5F55\u8BBE\u5907\u6570\u91CF\u7BA1\u7406\uFF08\u5168\u5C40\u3001\u4EFB\u610F\u7528\u6237\uFF09"},{"level":3,"title":"3.1 \u767B\u5F55\u603B\u6570\u7684\u9650\u5236","slug":"_3-1-\u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236"},{"level":3,"title":"3.2 \u603B\u6570\u7684\u9650\u5236","slug":"_3-2-\u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236"},{"level":3,"title":"3.3 \u603B\u6570\u7684\u9650\u5236","slug":"_3-3-\u6BCF-\u4E00\u79CD\u3001\u591A\u79CD-\u8BBE\u5907\u7C7B\u578B\u603B\u6570\u7684\u9650\u5236"}],"relativePath":"guide/basics/device-control.md","lastUpdated":1661873328000}'),p={name:"guide/basics/device-control.md"},o=l(`<h1 id="\u8BBE\u5907\u7BA1\u7406" tabindex="-1">\u8BBE\u5907\u7BA1\u7406 <a class="header-anchor" href="#\u8BBE\u5907\u7BA1\u7406" aria-hidden="true">#</a></h1><nav class="table-of-contents"><ul><li><a href="#_1-\u767B\u5F55\u548C\u9000\u51FA\u767B\u5F55">1. \u767B\u5F55\u548C\u9000\u51FA\u767B\u5F55</a><ul><li><a href="#_1-1-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u6240\u6709\u8BBE\u5907">1.1 \u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u6240\u6709\u8BBE\u5907</a></li><li><a href="#_1-2-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B\u7684\u8BBE\u5907\uFF08\u6240\u6709\u76F8\u540C\u7C7B\u578B\uFF09">1.2 \u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B\u7684\u8BBE\u5907\uFF08\u6240\u6709\u76F8\u540C\u7C7B\u578B\uFF09</a></li><li><a href="#_1-3-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B-\u4EFB\u610F\u8BBE\u5907id\u7684\u8BBE\u5907\uFF08\u67D0\u4E00\u4E2A\uFF09">1.3 \u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B&amp;\u4EFB\u610F\u8BBE\u5907Id\u7684\u8BBE\u5907\uFF08\u67D0\u4E00\u4E2A\uFF09</a></li></ul></li><li><a href="#_2-\u767B\u5F55\u8BBE\u5907\u67E5\u8BE2">2. \u767B\u5F55\u8BBE\u5907\u67E5\u8BE2</a><ul><li><a href="#_2-1-\u83B7\u5F97\u6240\u6709\u7528\u6237\u6240\u6709\u8BBE\u5907\u4FE1\u606F">2.1 \u83B7\u5F97\u6240\u6709\u7528\u6237\u6240\u6709\u8BBE\u5907\u4FE1\u606F</a></li><li><a href="#_2-2-\u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u7684\u8BBE\u5907">2.2 \u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u7684\u8BBE\u5907</a><ul></ul></li><li><a href="#_2-3-\u83B7\u5F97\u4EFB\u610F\u7528\u6237\u7684\u8BBE\u5907">2.3 \u83B7\u5F97\u4EFB\u610F\u7528\u6237\u7684\u8BBE\u5907</a><ul></ul></li></ul></li><li><a href="#_3-\u767B\u5F55\u8BBE\u5907\u6570\u91CF\u7BA1\u7406\uFF08\u5168\u5C40\u3001\u4EFB\u610F\u7528\u6237\uFF09">3. \u767B\u5F55\u8BBE\u5907\u6570\u91CF\u7BA1\u7406\uFF08\u5168\u5C40\u3001\u4EFB\u610F\u7528\u6237\uFF09</a><ul><li><a href="#_3-1-\u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236">3.1 \u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236</a><ul></ul></li><li><a href="#_3-2-\u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236">3.2 \u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236</a><ul></ul></li><li><a href="#_3-3-\u6BCF-\u4E00\u79CD\u3001\u591A\u79CD-\u8BBE\u5907\u7C7B\u578B\u603B\u6570\u7684\u9650\u5236">3.3 \u6BCF[\u4E00\u79CD\u3001\u591A\u79CD]\u8BBE\u5907\u7C7B\u578B\u603B\u6570\u7684\u9650\u5236</a><ul></ul></li></ul></li></ul></nav><p>\u8BBE\u5907\u7BA1\u7406\u662F\u5BF9\u7528\u6237\u7684\u8BBE\u5907\u8FDB\u884C<strong>\u767B\u5F55\u3001\u767B\u51FA\u3001\u67E5\u770B\u3001\u9650\u5236\u767B\u5F55\u6570\u91CF\u3001\u4E92\u65A5\u767B\u5F55\u7B49</strong>\u4E00\u7CFB\u5217\u64CD\u4F5C\u3002</p><h2 id="_1-\u767B\u5F55\u548C\u9000\u51FA\u767B\u5F55" tabindex="-1">1. \u767B\u5F55\u548C\u9000\u51FA\u767B\u5F55 <a class="header-anchor" href="#_1-\u767B\u5F55\u548C\u9000\u51FA\u767B\u5F55" aria-hidden="true">#</a></h2><p>\u5177\u4F53\u89C1 <a href="/guide/basics/login">\u767B\u5F55&amp;\u767B\u51FA</a></p><p>\u8FD9\u91CC\u8865\u5145\u51E0\u4E2A\u9000\u51FA\u767B\u5F55\u7684API</p><div class="info custom-block"><p class="custom-block-title">API</p><p>\u5728\u4E4B\u524D\u7684\u767B\u5F55\u767B\u51FA\u53EA\u80FD\u7BA1\u7406\u672C\u6B64\u8BF7\u6C42\u7684\u7528\u6237\uFF0C\u4E0B\u9762<strong>\u4E24\u4E2A</strong>\u65B9\u6CD5\u652F\u6301\u9000\u51FA<strong>\u4EFB\u610F\u7528\u6237</strong>\u767B\u5F55\u7684\u4EFB\u610F<strong>\u8BBE\u5907</strong>\u6216\u8005<strong>\u9000\u51FA\u5176\u6240\u6709\u8BBE\u5907</strong></p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">logoutAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> userId </span><span style="color:#89DDFF;">[,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Nullable</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceId</span><span style="color:#89DDFF;">])</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u8BF4\u660E</strong></p><blockquote><p>\u6CE8\u9500\u6307\u5B9A\u7528\u6237\u6240\u6709\u8BBE\u5907\uFF0C\u5EFA\u8BAE\u7528\u4E8E\u7BA1\u7406\u5458\uFF0C\u5982\u679C\u67D0\u7528\u6237\u60F3\u901A\u8FC7\u81EA\u5DF1id\u6CE8\u9500\u81EA\u5DF1\uFF0C\u5EFA\u8BAE\u52A0\u4E0A\u53C2\u6570\u6743\u9650\u5224\u65AD</p><p>\u3010deviceType\u3011\u6CE8\u9500\u6307\u5B9A\u7528\u6237\u4E0B\u7684\u7684\u67D0\u3010<strong>\u8BBE\u5907\u7C7B\u578B</strong>\u3011\u7684<strong>\u6240\u6709\u8BBE\u5907</strong></p><p>\u3010deviceType\uFF0CdeviceId\u3011 \u6CE8\u9500\u6307\u5B9A\u7528\u6237\u4E0B\u7684\u67D0\u3010<strong>\u8BBE\u5907\u7C7B\u578B\u548C\u8BBE\u5907id</strong>\u3011\u7684\u8BBE\u5907</p></blockquote></li><li><p><strong>\u53C2\u6570</strong></p><ul><li><u>userId</u> \u7528\u6237id - \u6CE8\u9500\u6307\u5B9A\u7528\u6237<strong>\u6240\u6709\u8BBE\u5907</strong></li><li><u>deviceType</u> \u8BBE\u5907\u7C7B\u578B</li><li><u>deviceId</u> \u8BBE\u5907id</li></ul></li></ul></div><h3 id="_1-1-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u6240\u6709\u8BBE\u5907" tabindex="-1">1.1 \u9000\u51FA<strong>\u4EFB\u610F\u7528\u6237</strong>\u7684\u6240\u6709\u8BBE\u5907 <a class="header-anchor" href="#_1-1-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u6240\u6709\u8BBE\u5907" aria-hidden="true">#</a></h3><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Roles</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/logout-at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">logoutAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">logoutAt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">userId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_1-2-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B\u7684\u8BBE\u5907\uFF08\u6240\u6709\u76F8\u540C\u7C7B\u578B\uFF09" tabindex="-1">1.2 \u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B\u7684\u8BBE\u5907\uFF08\u6240\u6709\u76F8\u540C\u7C7B\u578B\uFF09 <a class="header-anchor" href="#_1-2-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B\u7684\u8BBE\u5907\uFF08\u6240\u6709\u76F8\u540C\u7C7B\u578B\uFF09" aria-hidden="true">#</a></h3><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Roles</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/logout-at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">logoutAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">logoutAt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">);</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_1-3-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B-\u4EFB\u610F\u8BBE\u5907id\u7684\u8BBE\u5907\uFF08\u67D0\u4E00\u4E2A\uFF09" tabindex="-1">1.3 \u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B&amp;\u4EFB\u610F\u8BBE\u5907Id\u7684\u8BBE\u5907\uFF08\u67D0\u4E00\u4E2A\uFF09 <a class="header-anchor" href="#_1-3-\u9000\u51FA\u4EFB\u610F\u7528\u6237\u7684\u4EFB\u610F\u7C7B\u578B-\u4EFB\u610F\u8BBE\u5907id\u7684\u8BBE\u5907\uFF08\u67D0\u4E00\u4E2A\uFF09" aria-hidden="true">#</a></h3><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Roles</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/logout-at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">logoutAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceId</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">logoutAt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> deviceId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>@Roles(&quot;admin&quot;)</code> \u662F\u6743\u9650\u62E6\u622A\u6CE8\u89E3\uFF0C\u5177\u4F53\u4F5C\u7528\u4E3A\u9A8C\u8BC1\u67D0\u7528\u6237\u6388\u4E88\u7684\u89D2\u8272\u662F\u5426\u6EE1\u8DB3\u8981\u6C42\uFF0C\u5728\u8FD9\u91CC\u4F5C\u7528\u7684\u4E3A\u9A8C\u8BC1\u8BBF\u95EE\u6B64\u63A5\u53E3\u7684\u7528\u6237\u662F\u5426\u6709admin\u7684\u89D2\u8272\u3002\u5177\u4F53\u67E5\u770B<a href="/guide/basics/api-permission">API\u6743\u9650\u7BA1\u7406</a></p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Roles</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">~=</span><span style="color:#A6ACCD;"> \u7EA6\u7B49\u4E8E</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!</span><span style="color:#A6ACCD;">AuHepler</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasRole</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">PermissionException</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></div><h2 id="_2-\u767B\u5F55\u8BBE\u5907\u67E5\u8BE2" tabindex="-1">2. \u767B\u5F55\u8BBE\u5907\u67E5\u8BE2 <a class="header-anchor" href="#_2-\u767B\u5F55\u8BBE\u5907\u67E5\u8BE2" aria-hidden="true">#</a></h2><p>\u767B\u5F55\u4E4B\u540E\u7684\u8BBE\u5907\u53EF\u4EE5\u67E5\u8BE2</p><p>\u5176\u4E2D\u67E5\u8BE2\u51FA\u6765\u7684\u8BBE\u5907\u7C7B\u578B\u4E3A<code>DeviceDetails</code></p><p><strong>DeviceDetails</strong>\u4E00\u5171\u670910\u4E2A\u65B9\u6CD5</p><table><thead><tr><th>\u65B9\u6CD5\u540D</th><th>\u8BF4\u660E</th><th>\u7C7B\u578B</th></tr></thead><tbody><tr><td>getId</td><td>\u83B7\u5F97\u767B\u5F55\u6807\u8BC6</td><td>String</td></tr><tr><td>getUserId</td><td>\u83B7\u5F97\u7528\u6237id</td><td>&lt;\u81EA\u5B9A\u4E49\u7C7B\u578B&gt;</td></tr><tr><td>getDeviceType</td><td>\u83B7\u5F97\u8BBE\u5907\u7C7B\u578B</td><td>String</td></tr><tr><td>getDeviceId</td><td>\u83B7\u5F97\u8BBE\u5907id</td><td>String</td></tr><tr><td>getLastRequestTime</td><td>\u83B7\u5F97\u6700\u540E\u4E00\u6B21\u8BF7\u6C42\u65F6\u95F4</td><td>Date</td></tr><tr><td>getLastRequestIp</td><td>\u83B7\u5F97\u6700\u540E\u4E00\u6B21\u8BF7\u6C42ip</td><td>String</td></tr><tr><td>isDenyDevice</td><td>\u6B64\u8BBE\u5907\u662F\u5426\u88AB\u5C01\u7981</td><td>boolean</td></tr><tr><td>isDenyIp</td><td>\u6B64ip\u662F\u5426\u88AB\u5C01\u7981</td><td>boolean</td></tr><tr><td>isDenyIpRange</td><td>\u6B64ip\u662F\u5426\u5904\u4E8E\u88AB\u5C01\u7981\u7684\u7F51\u6BB5</td><td>boolean</td></tr><tr><td>isDenyUser</td><td>\u6B64\u7528\u6237\u662F\u5426\u88AB\u5C01\u7981</td><td>boolean</td></tr></tbody></table><h3 id="_2-1-\u83B7\u5F97\u6240\u6709\u7528\u6237\u6240\u6709\u8BBE\u5907\u4FE1\u606F" tabindex="-1">2.1 \u83B7\u5F97<u>\u6240\u6709\u7528\u6237</u><u>\u6240\u6709\u8BBE\u5907</u>\u4FE1\u606F <a class="header-anchor" href="#_2-1-\u83B7\u5F97\u6240\u6709\u7528\u6237\u6240\u6709\u8BBE\u5907\u4FE1\u606F" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">API</p><p>\u67E5\u8BE2\u6240\u6709\u8BBE\u5907\uFF0C\u8FD4\u56DE\u7684\u7ED3\u679C\u4E3A\u4E00\u4E2A\u4E0D\u53EF\u4FEE\u6539\u7684Map\uFF0C\u5176\u4E2Dkey\u4E3AuserId\uFF0Cvalue\u4E3A\u8BE5\u7528\u6237\u6240\u6709\u7684\u8BBE\u5907</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">NonNull</span></span>
<span class="line"><span style="color:#C792EA;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">DeviceDetails</span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getAllUserDevices</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u8BF4\u660E</strong></p><blockquote><p>\u67E5\u8BE2\u6240\u6709\u7528\u6237\u4FE1\u606F\uFF0C\u4E00\u4E2Amap userId-&gt;\u8BBE\u5907\u4FE1\u606F\u5217\u8868</p></blockquote></li></ul></div><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Roles</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/get-all-devices</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">DeviceDetails</span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getAllDevices</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAllUserDevices</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-2-\u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u7684\u8BBE\u5907" tabindex="-1">2.2 \u83B7\u5F97<u>\u5F53\u524D\u8BF7\u6C42\u7528\u6237</u>\u7684\u8BBE\u5907 <a class="header-anchor" href="#_2-2-\u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u7684\u8BBE\u5907" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">API</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">NonNull</span></span>
<span class="line"><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">DeviceDetails</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDevices</span><span style="color:#89DDFF;">([@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">])</span><span style="color:#A6ACCD;"> throws </span><span style="color:#C792EA;">NotLoginException</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u8BF4\u660E</strong></p><blockquote><p>\u67E5\u8BE2\u5F53\u524D\u8BBF\u95EE\u7528\u6237\u7684\u6240\u6709\u8BBE\u5907</p><p>\u3010deviceType\u3011 \u67E5\u8BE2\u5F53\u524D\u8BBF\u95EE\u7528\u6237\u7684\u6307\u5B9A\u7C7B\u578B\u7684\u6240\u6709\u8BBE\u5907</p></blockquote></li><li><p><strong>\u53C2\u6570</strong></p><ul><li><u>deviceType</u> [<u>\u53EF\u9009</u>]</li></ul></li><li><p><strong>\u5F02\u5E38</strong></p><ul><li><u>NotLoginException</u> \u5F53\u524D\u8BBF\u95EE\u7528\u6237\u672A\u767B\u5F55\uFF0C\u629B\u51FA\u5F02\u5E38</li></ul></li></ul></div><h4 id="_2-2-1-\u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u6240\u6709\u8BBE\u5907" tabindex="-1">2.2.1 \u83B7\u5F97<u>\u5F53\u524D\u8BF7\u6C42\u7528\u6237</u>\u6240\u6709\u8BBE\u5907 <a class="header-anchor" href="#_2-2-1-\u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u6240\u6709\u8BBE\u5907" aria-hidden="true">#</a></h4><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AuthRequireLogin</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/get-devices</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">DeviceDetails</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDevices</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDevices</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-2-2-\u83B7\u5F97\u5F53\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u67D0\u79CD\u7C7B\u578B\u7684\u6240\u6709\u8BBE\u5907" tabindex="-1">2.2.2 \u83B7\u5F97\u5F53<u>\u5F53\u524D\u8BF7\u6C42\u7528\u6237</u>\u67D0\u79CD\u7C7B\u578B\u7684\u6240\u6709\u8BBE\u5907 <a class="header-anchor" href="#_2-2-2-\u83B7\u5F97\u5F53\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u67D0\u79CD\u7C7B\u578B\u7684\u6240\u6709\u8BBE\u5907" aria-hidden="true">#</a></h4><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AuthRequireLogin</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/get-devices-by-deviceType</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">DeviceDetails</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDevices</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDevices</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">DeviceType</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-2-3-\u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u7684\u8BBE\u5907" tabindex="-1">2.2.3 \u83B7\u5F97<u>\u5F53\u524D\u8BF7\u6C42\u7528\u6237</u>\u7684\u8BBE\u5907 <a class="header-anchor" href="#_2-2-3-\u83B7\u5F97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u7684\u8BBE\u5907" aria-hidden="true">#</a></h4><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AuthRequireLogin</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/get-device</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DeviceDetails</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDevice</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDevice</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-3-\u83B7\u5F97\u4EFB\u610F\u7528\u6237\u7684\u8BBE\u5907" tabindex="-1">2.3 \u83B7\u5F97<u>\u4EFB\u610F\u7528\u6237</u>\u7684\u8BBE\u5907 <a class="header-anchor" href="#_2-3-\u83B7\u5F97\u4EFB\u610F\u7528\u6237\u7684\u8BBE\u5907" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">API</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">NonNull</span></span>
<span class="line"><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">DeviceDetails</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDevicesAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">[,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">])</span><span style="color:#A6ACCD;"> throws </span><span style="color:#C792EA;">NotLoginException</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u8BF4\u660E</strong></p><blockquote><p>\u67E5\u8BE2\u4EFB\u610F\u7528\u6237\u7684\u6240\u6709\u8BBE\u5907</p><p>\u3010deviceType\u3011 \u67E5\u8BE2\u4EFB\u610F\u7528\u6237\u7684\u6307\u5B9A\u7C7B\u578B\u7684\u6240\u6709\u8BBE\u5907</p></blockquote></li><li><p><strong>\u53C2\u6570</strong></p><ul><li><u>userId</u> \u8BE5\u7528\u6237id</li><li><u>deviceType</u> [<u>\u53EF\u9009</u>]</li></ul></li><li><p><strong>\u5F02\u5E38</strong></p><ul><li><u>NotLoginException</u> \u5F53\u524D\u8BBF\u95EE\u7528\u6237\u672A\u767B\u5F55\uFF0C\u629B\u51FA\u5F02\u5E38</li></ul></li></ul></div><h4 id="_2-3-1-\u83B7\u5F97\u4EFB\u610F\u7528\u6237\u6240\u6709\u8BBE\u5907" tabindex="-1">2.3.1 \u83B7\u5F97<u>\u4EFB\u610F\u7528\u6237</u>\u6240\u6709\u8BBE\u5907 <a class="header-anchor" href="#_2-3-1-\u83B7\u5F97\u4EFB\u610F\u7528\u6237\u6240\u6709\u8BBE\u5907" aria-hidden="true">#</a></h4><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Roles</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/get-device-at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">DeviceDetails</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDeviceAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDevicesAt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">userId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-3-2-\u83B7\u5F97\u5F53\u4EFB\u610F\u7528\u6237\u67D0\u79CD\u7C7B\u578B\u7684\u6240\u6709\u8BBE\u5907" tabindex="-1">2.3.2 \u83B7\u5F97\u5F53<u>\u4EFB\u610F\u7528\u6237</u>\u67D0\u79CD\u7C7B\u578B\u7684\u6240\u6709\u8BBE\u5907 <a class="header-anchor" href="#_2-3-2-\u83B7\u5F97\u5F53\u4EFB\u610F\u7528\u6237\u67D0\u79CD\u7C7B\u578B\u7684\u6240\u6709\u8BBE\u5907" aria-hidden="true">#</a></h4><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Roles</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/get-device-at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">DeviceDetails</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDeviceAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDevicesAt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-3-3-\u83B7\u5F97\u4EFB\u610F\u7528\u6237\u7684\u8BBE\u5907" tabindex="-1">2.3.3 \u83B7\u5F97<u>\u4EFB\u610F\u7528\u6237</u>\u7684\u8BBE\u5907 <a class="header-anchor" href="#_2-3-3-\u83B7\u5F97\u4EFB\u610F\u7528\u6237\u7684\u8BBE\u5907" aria-hidden="true">#</a></h4><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Roles</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/get-device-at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DeviceDetails</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDeviceAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> inStringt deviceId</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDevice</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> deviceType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> deviceId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="_3-\u767B\u5F55\u8BBE\u5907\u6570\u91CF\u7BA1\u7406\uFF08\u5168\u5C40\u3001\u4EFB\u610F\u7528\u6237\uFF09" tabindex="-1">3. \u767B\u5F55\u8BBE\u5907\u6570\u91CF\u7BA1\u7406\uFF08\u5168\u5C40\u3001\u4EFB\u610F\u7528\u6237\uFF09 <a class="header-anchor" href="#_3-\u767B\u5F55\u8BBE\u5907\u6570\u91CF\u7BA1\u7406\uFF08\u5168\u5C40\u3001\u4EFB\u610F\u7528\u6237\uFF09" aria-hidden="true">#</a></h2><p><a href="/guide/settings#userdevice\u914D\u7F6E">\u67E5\u770B\u5177\u4F53\u914D\u7F6E</a></p><h3 id="_3-1-\u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236" tabindex="-1">3.1 <u>\u6240\u6709\u8BBE\u5907</u>\u767B\u5F55\u603B\u6570\u7684\u9650\u5236 <a class="header-anchor" href="#_3-1-\u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title"><u>\u6240\u6709\u8BBE\u5907</u>\u767B\u5F55\u603B\u6570\u7684\u9650\u5236</p><p>\u8A00\u5916\u4E4B\u610F\u5C31\u662F\u4E00\u4E2A\u7528\u6237\u6700\u591A\u80FD\u591F\u767B\u5F55\u591A\u5C11\u4E2A\u8BBE\u5907\uFF0C\u4E0D\u7BA1\u7C7B\u578B\u548Cid\u5982\u4F55\u3002</p></div><p>\u6B64\u914D\u7F6E\u53EF\u4EE5\u5728yml\u91CC\u914D\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u5728\u540E\u7EED\u901A\u8FC7\u4EE3\u7801\u7684\u65B9\u5F0F\u6765\u914D\u7F6E</p><h4 id="_3-1-1-\u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236-yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09" tabindex="-1">3.1.1 <u>\u6240\u6709\u8BBE\u5907</u>\u767B\u5F55\u603B\u6570\u7684\u9650\u5236 - yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09 <a class="header-anchor" href="#_3-1-1-\u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236-yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09" aria-hidden="true">#</a></h4><div class="language-yaml"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">authz</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># -1\u4E3A\u4E0D\u505A\u9650\u5236\uFF0C\u6700\u5C0F\u4E3A1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">maximum-total-device</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># \u9ED8\u8BA4\u4E3A-1 </span></span>
<span class="line"></span></code></pre></div><h4 id="_3-1-2-\u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236-\u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09" tabindex="-1">3.1.2 <u>\u6240\u6709\u8BBE\u5907</u>\u767B\u5F55\u603B\u6570\u7684\u9650\u5236 - \u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09 <a class="header-anchor" href="#_3-1-2-\u6240\u6709\u8BBE\u5907\u767B\u5F55\u603B\u6570\u7684\u9650\u5236-\u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09" aria-hidden="true">#</a></h4><h5 id="\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0" tabindex="-1">&gt;&gt; <strong>\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0</strong> <a class="header-anchor" href="#\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0" aria-hidden="true">#</a></h5><div class="info custom-block"><p class="custom-block-title">API</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeMaximumTotalDevice</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws </span><span style="color:#C792EA;">NotLoginException</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u53C2\u6570</strong></p><ul><li><u>total</u> \u603B\u6570</li></ul></li><li><p><strong>\u5F02\u5E38</strong></p><ul><li><u>NotLoginException</u> \u5F53\u524D\u8BBF\u95EE\u7528\u6237\u672A\u767B\u5F55\uFF0C\u629B\u51FA\u5F02\u5E38</li></ul></li></ul></div><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AuthRequireLogin</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/change-max-device-total</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeMaximumDeviceTotal</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">changeMaximumDeviceTotal</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">total</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h5 id="\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0" tabindex="-1">&gt;&gt; <strong>\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0</strong> <a class="header-anchor" href="#\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0" aria-hidden="true">#</a></h5><div class="info custom-block"><p class="custom-block-title">API</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeMaximumTotalDeviceAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws </span><span style="color:#C792EA;">NotLoginException</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u53C2\u6570</strong></p><ul><li><u>userId</u> \u9700\u8981\u4FEE\u6539\u7684\u7528\u6237id</li><li><u>total</u> \u603B\u6570</li></ul></li><li><p><strong>\u5F02\u5E38</strong></p><ul><li><u>NotLoginException</u> \u5F53\u524D\u8BBF\u95EE\u7528\u6237\u672A\u767B\u5F55\uFF0C\u629B\u51FA\u5F02\u5E38</li></ul></li></ul></div><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AuthRequireLogin</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/change-max-device-total-at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeMaximumDeviceTotalAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">changeMaximumDeviceTotalAt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-2-\u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236" tabindex="-1">3.2 <u>\u540C\u7C7B\u578B\u8BBE\u5907</u>\u603B\u6570\u7684\u9650\u5236 <a class="header-anchor" href="#_3-2-\u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title"><u>\u540C\u7C7B\u578B\u8BBE\u5907</u>\u603B\u6570\u7684\u9650\u5236</p><p>\u5BF9\u6240\u6709\u8BBE\u5907\u7C7B\u578B\u751F\u6548\u3002</p><p>\u6240\u6709\u7C7B\u578B\u7684\u8BBE\u5907\u6700\u591A\u767B\u5F55\u591A\u5C11\u4E2A\u3002</p><p>\u5982\uFF1A\u82E5\u6B64\u503C\u8BBE\u7F6E\u4E3A1\uFF0C\u5F53\u8BBE\u5907\u7C7B\u578B\u4E3A<code>mac</code>\u7684\u8BBE\u5907\u4F9D\u6B21\u767B\u5F55\u4E24\u6B21\u4E4B\u540E\uFF0C\u7B2C\u4E00\u6B21\u767B\u5F55\u7684\u8BBE\u5907\u7684token\uFF08\u767B\u5F55\u4EE4\u724C\uFF09\u5C06\u4F1A\u65E0\u6548\u3002</p></div><p><a href="/guide/basics/device-control#_3-3-\u6BCF-\u4E00\u79CD\u3001\u591A\u79CD-\u8BBE\u5907\u7C7B\u578B\u603B\u6570\u7684\u9650\u5236">\u6BCF\u4E00\u79CD\u3001\u591A\u79CD\u8BBE\u5907\u7C7B\u578B\u603B\u6570\u7684\u9650\u5236</a> \u914D\u7F6E\u4F1A\u5C06\u6B64\u914D\u7F6E\u8986\u76D6</p><p>\u6B64\u914D\u7F6E\u53EF\u4EE5\u5728yml\u91CC\u914D\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u5728\u540E\u7EED\u901A\u8FC7\u4EE3\u7801\u7684\u65B9\u5F0F\u6765\u914D\u7F6E</p><h4 id="_3-2-1-\u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236-yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09" tabindex="-1">3.2.1 <u>\u540C\u7C7B\u578B\u8BBE\u5907</u>\u603B\u6570\u7684\u9650\u5236 - yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09 <a class="header-anchor" href="#_3-2-1-\u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236-yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09" aria-hidden="true">#</a></h4><div class="language-yaml"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">authz</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># -1\u4E3A\u4E0D\u505A\u9650\u5236\uFF0C\u6700\u5C0F\u4E3A1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">maximum-total-same-type-device</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># \u9ED8\u8BA4\u4E3A1</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-2-2-\u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236-\u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09" tabindex="-1">3.2.2 <u>\u540C\u7C7B\u578B\u8BBE\u5907</u>\u603B\u6570\u7684\u9650\u5236 - \u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09 <a class="header-anchor" href="#_3-2-2-\u540C\u7C7B\u578B\u8BBE\u5907\u603B\u6570\u7684\u9650\u5236-\u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09" aria-hidden="true">#</a></h4><h5 id="\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0-1" tabindex="-1">&gt;&gt; <strong>\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0</strong> <a class="header-anchor" href="#\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0-1" aria-hidden="true">#</a></h5><div class="info custom-block"><p class="custom-block-title">API</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeMaximumTotalSameTypeDevice</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws </span><span style="color:#C792EA;">NotLoginException</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u53C2\u6570</strong></p><ul><li>total \u603B\u6570</li></ul></li><li><p><strong>\u5F02\u5E38</strong></p><ul><li>NotLoginException \u5F53\u524D\u8BBF\u95EE\u7528\u6237\u672A\u767B\u5F55\uFF0C\u629B\u51FA\u5F02\u5E38</li></ul></li></ul></div><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AuthRequireLogin</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/change-max-total-same-type-device</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeMaximumTotalSameTypeDevice</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">changeMaximumTotalSameTypeDevice</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">total</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h5 id="\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0-1" tabindex="-1">&gt;&gt; <strong>\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0</strong> <a class="header-anchor" href="#\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0-1" aria-hidden="true">#</a></h5><div class="info custom-block"><p class="custom-block-title">API</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeMaximumTotalSameTypeDeviceAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws </span><span style="color:#C792EA;">NotLoginException</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u53C2\u6570</strong></p><ul><li><u>userId</u> \u9700\u8981\u4FEE\u6539\u7684\u7528\u6237id</li><li><u>total</u> \u603B\u6570</li></ul></li><li><p><strong>\u5F02\u5E38</strong></p><ul><li><u>NotLoginException</u> \u5F53\u524D\u8BBF\u95EE\u7528\u6237\u672A\u767B\u5F55\uFF0C\u629B\u51FA\u5F02\u5E38</li></ul></li></ul></div><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AuthRequireLogin</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/change-max-total-same-type-device-at</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeMaximumTotalSameTypeDeviceAt</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestParam</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">changeMaximumTotalSameTypeDeviceAt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-3-\u6BCF-\u4E00\u79CD\u3001\u591A\u79CD-\u8BBE\u5907\u7C7B\u578B\u603B\u6570\u7684\u9650\u5236" tabindex="-1">3.3 <u>\u6BCF[\u4E00\u79CD\u3001\u591A\u79CD]\u8BBE\u5907\u7C7B\u578B</u>\u603B\u6570\u7684\u9650\u5236 <a class="header-anchor" href="#_3-3-\u6BCF-\u4E00\u79CD\u3001\u591A\u79CD-\u8BBE\u5907\u7C7B\u578B\u603B\u6570\u7684\u9650\u5236" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title"><u>\u6240\u6709\u8BBE\u5907</u>\u767B\u5F55\u603B\u6570\u7684\u9650\u5236</p><p>\u5982\u9650\u5236 \u7535\u8111\u7AEF\u3001\u7535\u89C6\u7AEF\u7684\u8BBE\u5907\u4E2A\u6570\u4E00\u5171\u4E0D\u8D85\u8FC72\u4E2A\u7B49</p></div><p>\u6B64\u914D\u7F6E\u53EF\u4EE5\u5728yml\u91CC\u914D\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u5728\u540E\u7EED\u901A\u8FC7\u4EE3\u7801\u7684\u65B9\u5F0F\u6765\u914D\u7F6E</p><h4 id="_3-3-1-yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09" tabindex="-1">3.3.1 yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09 <a class="header-anchor" href="#_3-3-1-yml\u914D\u7F6E\u65B9\u6CD5\uFF08\u5168\u5C40\uFF09" aria-hidden="true">#</a></h4><div class="language-yaml"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">authz</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">types-total</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">total</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">types</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ios</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mac</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-3-2-\u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09" tabindex="-1">3.3.2 \u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09 <a class="header-anchor" href="#_3-3-2-\u4EE3\u7801\u914D\u7F6E\u65B9\u6CD5\uFF08\u4E3A\u6BCF\u4E00\u4F4D\u7528\u6237\u6DFB\u52A0\u89C4\u5219\uFF09" aria-hidden="true">#</a></h4><h5 id="\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0-2" tabindex="-1">&gt;&gt; <strong>\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0</strong> <a class="header-anchor" href="#\u4E3A\u5F53\u524D\u7528\u6237\u6DFB\u52A0-2" aria-hidden="true">#</a></h5><div class="info custom-block"><p class="custom-block-title">API</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addDeviceTypesTotalLimit</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Collection</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">String</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> types</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws </span><span style="color:#C792EA;">NotLoginException</span></span>
<span class="line"></span></code></pre></div><ul><li><strong>\u53C2\u6570</strong><ul><li><u>types</u> \u8BBE\u5907\u7C7B\u578B\u96C6\u5408</li><li><u>total</u> \u603B\u6570</li></ul></li></ul></div><p>Pad\u7C7B\u578B\u7684\u8BBE\u5907\u548CPhone\u7C7B\u578B\u7684\u8BBE\u5907\u603B\u6570\u52A0\u8D77\u6765\u4E0D\u80FD\u8D85\u8FC72\u4E2A</p><p>PC\u7C7B\u578B\u7684\u8BBE\u5907\u4E0D\u80FD\u8D85\u8FC71\u4E2A</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AuthRequireLogin</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/types-total</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addDeviceTypesTotal</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addDeviceTypesTotalLimit</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Arrays</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asList</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">PC</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">);</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addDeviceTypesTotalLimit</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Arrays</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asList</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Pad</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Phone</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h5 id="\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0-2" tabindex="-1">&gt;&gt; <strong>\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0</strong> <a class="header-anchor" href="#\u4E3A\u4EFB\u610F\u7528\u6237\u6DFB\u52A0-2" aria-hidden="true">#</a></h5><div class="info custom-block"><p class="custom-block-title">API</p><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addDeviceTypesTotalLimit</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> userId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">NonNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Collection</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">String</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> types</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> total</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><ul><li><p><strong>\u53C2\u6570</strong></p><ul><li><u>userId</u> \u9700\u8981\u4FEE\u6539\u7684\u7528\u6237id</li><li><u>types</u> \u8BBE\u5907\u7C7B\u578B\u96C6\u5408</li><li><u>total</u> \u603B\u6570</li></ul></li><li><p><strong>\u5F02\u5E38</strong></p><ul><li><u>NotLoginException</u> \u5F53\u524D\u8BBF\u95EE\u7528\u6237\u672A\u767B\u5F55\uFF0C\u629B\u51FA\u5F02\u5E38</li></ul></li></ul></div><div class="language-java"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line highlighted"><span style="color:#A6ACCD;">AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addDeviceTypesTotalLimit</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Arrays</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asList</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">PC</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">);</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">AuHelper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addDeviceTypesTotalLimit</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Arrays</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asList</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Pad</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Phone</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">\u5F53\u8BBE\u5907\u8D85\u51FA\u8BBE\u7F6E\u65F6\uFF0C\u4E0B\u7EBF\u89C4\u5219\u662F\u600E\u6837\u7684\uFF1F</p><p>\u6BCF\u5F53\u4E00\u4E2A\u65B0\u7684\u8BBE\u5907\u767B\u5F55\uFF0C\u82E5\u6B64\u8BBE\u5907\u89E6\u53D1\u4E86\u4E0A\u8FF0\u7684\u89C4\u5219\uFF0C\u90A3\u4E48\u5E76\u4E0D\u662F\u6700\u5148\u767B\u5F55\u7684\u4E0B\u7EBF\uFF0C\u800C\u662F\u6309\u6700\u8FD1\u8BBF\u95EE\u65F6\u95F4\u4F9D\u6B64\u8E22\u51FA\u8BBF\u95EE\u65F6\u95F4\u6700\u65E9\u7684\u8BBE\u5907\u3002</p></div>`,80),e=[o];function t(c,r,D,y,F,i){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{C as __pageData,u as default};
